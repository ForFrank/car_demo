webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("/5sW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=i("VU/8")({name:"App"},o,!1,function(e){i("ahPi")},null,null).exports,r=i("/ocq"),l=(i("mtWM"),i("7t+N")),c=i.n(l),s=new a.default,d=i("VU/8")(s,null,!1,null,null,null).exports,u={name:"Map",data:function(){return{querryCarPosition:{status:100,data:[{id:1,longitude:"116.215696",latitude:"39.932752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:15383232e5,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"001",sysType:"1",coordinate:"1"},{id:2,longitude:"116.115696",latitude:"39.832752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:15383232e5,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"002",sysType:"1",coordinate:"1"},{id:3,longitude:"116.205696",latitude:"39.912752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:15383232e5,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"003",sysType:"1",coordinate:"1"}]},msg:""}},mounted:function(){var e={realtimeFlag:!0},t=this,i=window.g.MAP_URL,a=new Cesium.Viewer("cesiumContainer",{animation:!1,baseLayerPicker:!1,fullscreenButton:!0,geocoder:!1,homeButton:!1,infoBox:!0,sceneModePicker:!1,selectionIndicator:!0,timeline:!1,navigationHelpButton:!1,scene3DOnly:!1,clock:new Cesium.Clock,selectedImageryProviderViewModel:void 0,imageryProviderViewModels:Cesium.createDefaultImageryProviderViewModels(),selectedTerrainProviderViewModel:void 0,terrainProviderViewModels:Cesium.createDefaultTerrainProviderViewModels(),vrButton:!1,shadows:!0,fullscreenElement:document.getElementById("cesiumContainer"),useDefaultRenderLoop:!0,targetFrameRate:void 0,showRenderLoopErrors:!0,automaticallyTrackDataSourceClocks:!0,contextOptions:void 0,sceneMode:Cesium.SceneMode.SCENE2D,mapProjection:new Cesium.WebMercatorProjection,dataSources:new Cesium.DataSourceCollection,imageryProvider:new Cesium.UrlTemplateImageryProvider({url:i})});a._cesiumWidget._creditContainer.style.display="none",a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(116.38,39.9,15e4)});var o=document.getElementById("longitude_show"),n=document.getElementById("latitude_show"),r=a.scene.canvas,l=a.scene.globe.ellipsoid;new Cesium.ScreenSpaceEventHandler(r).setInputAction(function(e){var t=a.camera.pickEllipsoid(e.endPosition,l);if(t){var i=a.scene.globe.ellipsoid.cartesianToCartographic(t),r=Cesium.Math.toDegrees(i.latitude).toFixed(4),c=Cesium.Math.toDegrees(i.longitude).toFixed(4);o.innerHTML=c,n.innerHTML=r}},Cesium.ScreenSpaceEventType.MOUSE_MOVE);var s=new Cesium.Cartographic.fromDegrees(116.38,39.9,15e4);a.extend(Cesium.viewerCesiumNavigationMixin,{defaultResetView:s,enableDistanceLegend:!0});var u,m=[];c()("body").delegate("#realtime","click",function(){e.realtimeFlag=!1,a.entities.removeAll(),a.dataSources.removeAll(),c()("div.cesium-viewer-animationContainer").hide(500),c()(".cesium-viewer-timelineContainer").hide(500),t.flag=!0,m=[];var i=new Cesium.Cartesian2(0,0),o=new Cesium.Cartesian2(a.canvas.clientWidth,a.canvas.clientHeight),n=a.scene.globe.pick(a.camera.getPickRay(i),a.scene),r=a.scene.globe.pick(a.camera.getPickRay(o),a.scene),l=a.scene.globe.ellipsoid.cartesianToCartographic(n),s=a.scene.globe.ellipsoid.cartesianToCartographic(r);l.longitude,Math.PI,l.latitude,Math.PI,s.longitude,Math.PI,s.latitude,Math.PI,m=t.querryCarPosition.data,a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(parseFloat(m[0].longitude),parseFloat(m[0].latitude),1e5)});for(var d=m.length,v=0;v<d;v++)h=m[v],g=void 0,g='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',g+="<tr><th>车速</th><td>"+h.mobileyeChinaVelocity+"</td></tr>",g+="<tr><th>油量</th><td>"+h.oilMass+"</td></tr>",g+="<tr><th>经度</th><td>"+h.longitude+"</td></tr>",g+="<tr><th>维度</th><td>"+h.latitude+"</td></tr>",g+="</tbody></table>",a.entities.add({name:"车辆ID："+h.id,description:g,position:Cesium.Cartesian3.fromDegrees(parseFloat(h.longitude),parseFloat(h.latitude),5e3),label:{text:h.deviceCode,font:"12px Microsoft YaHei",style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.WHITE,outlineColor:Cesium.Color.BLACK,outlineWidth:4,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-9),translucencyByDistance:new Cesium.NearFarScalar(3e3,1,4e6,0),height:13e3},billboard:{image:"./static/car.png",width:50,height:30,translucencyByDistance:new Cesium.NearFarScalar(2e6,1,4e6,0)}});var h,g;clearInterval(u),u=setInterval(function(){var i=new Cesium.Cartesian2(0,0),o=new Cesium.Cartesian2(a.canvas.clientWidth,a.canvas.clientHeight),n=a.scene.globe.pick(a.camera.getPickRay(i),a.scene),r=a.scene.globe.pick(a.camera.getPickRay(o),a.scene),l=a.scene.globe.ellipsoid.cartesianToCartographic(n),c=a.scene.globe.ellipsoid.cartesianToCartographic(r);l.longitude,Math.PI,l.latitude,Math.PI,c.longitude,Math.PI,c.latitude,Math.PI,m=t.querryCarPosition.data,a.entities.removeAll(),a.dataSources.removeAll();for(var s,d,v=m.length,h=0;h<v;h++)s=m[h],d=void 0,d='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',d+="<tr><th>车速</th><td>"+s.mobileyeChinaVelocity+"</td></tr>",d+="<tr><th>油量</th><td>"+s.oilMass+"</td></tr>",d+="<tr><th>经度</th><td>"+s.longitude+"</td></tr>",d+="<tr><th>维度</th><td>"+s.latitude+"</td></tr>",d+="</tbody></table>",a.entities.add({name:"车辆ID："+s.id,description:d,position:Cesium.Cartesian3.fromDegrees(parseFloat(s.longitude),parseFloat(s.latitude),3e3),label:{text:s.deviceCode,font:"12px Microsoft YaHei",style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.WHITE,outlineColor:Cesium.Color.BLACK,outlineWidth:4,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-9),translucencyByDistance:new Cesium.NearFarScalar(3e3,1,4e6,0),height:13e3},billboard:{image:"./static/car.png",width:50,height:30,translucencyByDistance:new Cesium.NearFarScalar(7e6,1,9e6,0)}});m=[],!0===e.realtimeFlag&&(e.realtimeFlag=!1,m=[],a.entities.removeAll(),a.dataSources.removeAll(),clearInterval(u))},3e3)}),c()("body").delegate("#history","click",function(){a.entities.removeAll(),a.dataSources.removeAll(),e.realtimeFlag=!0}),c()("body").delegate("#buttonclick","click",function(){a.entities.removeAll(),a.dataSources.removeAll(),c()(".cesium-viewer-animationContainer").hide(500),c()(".cesium-viewer-timelineContainer").hide(500)}),c()("body").delegate("#trajectorybutton","click",function(){a.entities.removeAll(),a.dataSources.removeAll(),c()(".cesium-viewer-animationContainer").hide(500),c()(".cesium-viewer-timelineContainer").hide(500)}),c()("body").delegate("#trajectoryelbutton","click",function(){a.entities.removeAll(),a.dataSources.removeAll(),c()(".cesium-viewer-animationContainer").hide(500),c()(".cesium-viewer-timelineContainer").hide(500)});var v=[];d.$on("trajectory",function(e){t.msg=e,v=[],c.a.each(t.msg,function(e,t){v.push(e,parseFloat(t.longitude),parseFloat(t.latitude),0)}),c()("div.cesium-viewer-animationContainer").hide(500),c()(".cesium-viewer-timelineContainer").hide(500),a.entities.removeAll(),a.dataSources.removeAll();var i=new Date(e[0].trackTime).toISOString(),o=new Date(e[e.length-1].trackTime).toISOString(),n=Cesium.Cartesian3.fromDegrees(parseFloat(e[1].longitude),parseFloat(e[1].latitude),2e3);a.camera.flyTo({destination:n});var r="\x3c!--HTML--\x3e<table class='cesium-infoBox-defaultTable'>";r+="<tr><td>设备编码:</td><td>"+e[0].deviceCode+"</td></tr>",r+="<tr><td>开始时间:</td><td>"+e[0].trackTime+"</td></tr>",r+="<tr><td>结束时间:</td><td>"+e[e.length-1].trackTime+"</td></tr>",r+="</table>";var l=[{id:"document",name:"CZML Path",version:"1.0",clock:{interval:i+"/"+o,multiplier:1}},{id:"point",name:"设备："+e[0].deviceCode,description:r,availability:i+"/"+o,path:{material:{polylineOutline:{color:{rgba:[255,0,255,255]},outlineColor:{rgba:[0,255,255,255]},outlineWidth:4}},width:5,leadTime:0,trailTime:1e3,resolution:0},billboard:{image:"./static/car.png",width:50,height:30},position:{epoch:i,cartographicDegrees:v}}];function s(e){var t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!0}var d=new Cesium.ClockViewModel(a.clock),u=new Cesium.AnimationViewModel(d);setTimeout(function(){new Cesium.Animation("animationContainer",u)},2e3),c()(".cesium-viewer-animationContainer").show(500),setTimeout(function(){var e=new Cesium.Timeline("timelineContainer",a.clock);e.addEventListener("settime",s,!1),e.zoomTo(a.clock.startTime,a.clock.stopTime)},2e3),c()(".cesium-viewer-timelineContainer").show(500),a.dataSources.add(Cesium.CzmlDataSource.load(l)),a.clock.shouldAnimate=!0,setTimeout(function(){a.trackedEntity=null},1e3)})}},m={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"cesiumContainer"}},[t("div",{staticClass:"cesium-viewer-animationContainer",staticStyle:{"z-index":"100",bottom:"20px",left:"20px",float:"left"},attrs:{id:"animationContainer"}}),this._v(" "),t("div",{staticClass:"cesium-viewer-timelineContainer",staticStyle:{"z-index":"100",right:"50px",bottom:"20px",left:"188px"},attrs:{id:"timelineContainer"}}),this._v(" "),t("div",{attrs:{id:"latlng_show"}},[t("div",{staticClass:"latlog"},[t("p",[this._v("经度："),t("span",{attrs:{id:"longitude_show"}})])]),this._v(" "),t("div",{staticClass:"latlog"},[t("p",[this._v("纬度："),t("span",{attrs:{id:"latitude_show"}})])])])])}]};var v={name:"Nowtime",mounted:function(){setInterval(function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1,i=(new Date).getDate()<10?"0"+(new Date).getDate():(new Date).getDate(),a=(new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours(),o=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),n=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();c()("#time").text(e+"年"+t+"月"+i+"日 "+a+":"+o+":"+n)},1e3)}},h={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{float:"right"},attrs:{id:"time"}})},staticRenderFns:[]};var g={name:"Form",components:{Map:i("VU/8")(u,m,!1,function(e){i("T4x7")},null,null).exports,Nowtime:i("VU/8")(v,h,!1,function(e){i("hte4")},"data-v-3c9ca9dc",null).exports},data:function(){return{queryAllDevice:{status:100,data:[{id:1,deviceName:"设备001",deviceCode:"001",creatTime:15397056e5},{id:2,deviceName:"设备002",deviceCode:"002",creatTime:15397056e5},{id:3,deviceName:"设备003",deviceCode:"003",creatTime:15397056e5},{id:4,deviceName:"设备004",deviceCode:"004",creatTime:15397056e5},{id:5,deviceName:"设备005",deviceCode:"005",creatTime:15397056e5},{id:6,deviceName:"设备006",deviceCode:"006",creatTime:15397056e5},{id:7,deviceName:"设备007",deviceCode:"007",creatTime:15397056e5},{id:8,deviceName:"设备008",deviceCode:"008",creatTime:15397056e5},{id:9,deviceName:"设备009",deviceCode:"009",creatTime:15397056e5}]},queryTrackUrl:{status:100,data:[{id:1,longitude:"116.215696",latitude:"39.932752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:15383232e5,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"001",sysType:"1",coordinate:"1"},{id:1,longitude:"116.216696",latitude:"39.932752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:1538323201e3,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"001",sysType:"1",coordinate:"1"},{id:1,longitude:"116.217696",latitude:"39.932752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:1538323202e3,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"001",sysType:"1",coordinate:"1"},{id:1,longitude:"116.218696",latitude:"39.932752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:1538323203e3,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"001",sysType:"1",coordinate:"1"},{id:1,longitude:"116.219696",latitude:"39.932752",mobileyeChinaVelocity:1,mobileyeVelocity:1,trackTime:1538323204e3,tachometer:1,gear:1,oilMass:"1",turn:1,fontCarVelocity:1,fontCarDistance:1,fontCarDistanceTime:1,deviceCode:"001",sysType:"1",coordinate:"1"}]},deviceflag:!1,trajectoryflag:!1,devicelists:[],trajectorylists:[],msg:[]}},computed:{user:function(){return this.$store.state.user}},methods:{toggle:function(){this.deviceflag=!1,this.trajectoryflag=!1},showDevice:function(){this.deviceflag=!0,this.trajectoryflag=!1,this.devicelists=this.queryAllDevice.data},replay:function(e){var t=[];this.deviceflag=!1,this.trajectoryflag=!0,this.trajectorylists=this.queryTrackUrl.data,c.a.each(this.queryTrackUrl.data,function(e,i){t.push(i),this.msg=t}),d.$emit("trajectory",t),this.$emit("click",e)}},mounted:function(){}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("el-container",{attrs:{id:"Main_container"}},[i("el-header",[i("h2",[e._v("车辆管理系统")]),e._v(" "),i("Nowtime")],1),e._v(" "),i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("el-menu",{attrs:{"default-openeds":["1"],"background-color":"#0d2135"}},[i("el-submenu",{attrs:{index:"1"}},[i("div",{attrs:{slot:"title"},slot:"title"},[e._v("车辆信息")]),e._v(" "),i("el-menu-item-group",[i("el-menu-item",{attrs:{index:"1-1"}},[i("div",{attrs:{id:"history"},on:{click:e.showDevice}},[e._v("历史回放")])]),e._v(" "),i("el-menu-item",{attrs:{index:"1-2"}},[i("div",{attrs:{id:"realtime"},on:{click:function(t){e.toggle()}}},[e._v("定位查询")])])],1)],1)],1)],1),e._v(" "),i("el-main",{staticStyle:{"text-align":"left",height:"100%"},attrs:{id:"imp"}},[i("Map"),e._v(" "),e.deviceflag?i("div",{attrs:{id:"replayUI"}},[i("div",[i("p",{staticStyle:{width:"50%",float:"left","font-size":"15px"}},[e._v("历史回放")]),e._v(" "),i("button",{staticStyle:{float:"right"},attrs:{id:"buttonclick"},on:{click:function(t){e.toggle()}}},[e._v("关闭")])]),e._v(" "),i("div",{staticClass:"table-head"},[i("table",{attrs:{bgcolor:"#545557",border:"1",cellpadding:"0",cellspacing:"0",bordercolor:"black"}},[i("colgroup",[i("col",{staticStyle:{width:"80px"}}),i("col",{staticStyle:{width:"100px"}}),i("col",{staticStyle:{width:"130px"}})]),e._v(" "),i("thead",[i("tr",[i("td",[e._v("车辆ID")]),e._v(" "),i("td",[e._v("车辆名称")]),e._v(" "),i("td",[e._v("日期")]),e._v(" "),i("td",[e._v("操作")])])])])]),e._v(" "),i("div",{staticClass:"table-body"},[i("table",{attrs:{bgcolor:"#545557",border:"1",cellpadding:"0",cellspacing:"0",bordercolor:"black"}},[i("colgroup",[i("col",{staticStyle:{width:"80px"}}),i("col",{staticStyle:{width:"100px"}}),i("col",{staticStyle:{width:"130px"}})]),e._v(" "),i("tbody",{attrs:{id:"tby"}},e._l(e.devicelists,function(t,a){return i("tr",{key:a.id,staticClass:"first"},[i("td",[e._v(e._s(t.deviceCode))]),e._v(" "),i("td",[e._v(e._s(t.deviceName))]),e._v(" "),i("td",[e._v(e._s(t.creatTime))]),e._v(" "),i("td",[i("div",[i("el-button",{ref:"myButton",refInFor:!0,attrs:{type:"text",size:"mini",id:t.deviceCode},on:{click:function(i){e.replay(t.deviceCode)}}},[e._v("回放\n                ")])],1)])])}))])])]):e._e(),e._v(" "),e.trajectoryflag?i("div",{attrs:{id:"trajectoryUI"}},[i("div",{staticStyle:{height:"25px"}},[i("p",{staticStyle:{width:"50%",float:"left","font-size":"15px"}},[e._v("历史回放")]),e._v(" "),i("button",{staticStyle:{float:"right"},attrs:{id:"trajectorybutton"},on:{click:function(t){e.toggle()}}},[e._v("关闭")])]),e._v(" "),i("div",{staticStyle:{height:"50px"}},[i("table",{attrs:{width:"100%"}},[i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"left"}},[e._v("开始时间："+e._s(e.trajectorylists[0].trackTime))]),e._v(" "),i("td",{staticStyle:{"text-align":"center"}},[e._v("设备ID："+e._s(e.trajectorylists[0].deviceCode))])]),e._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[e._v("结束时间："+e._s(e.trajectorylists[e.trajectorylists.length-1].trackTime))]),e._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("el-button",{staticStyle:{float:"right"},attrs:{type:"text",size:"mini",id:"trajectoryelbutton"},on:{click:e.showDevice}},[e._v("返回")])],1)])])])]),e._v(" "),i("div",{staticClass:"table-head"},[i("table",{attrs:{bgcolor:"#545557",border:"1",cellpadding:"0",cellspacing:"0",bordercolor:"black"}},[i("colgroup",[i("col",{staticStyle:{width:"130px"}}),i("col",{staticStyle:{width:"100px"}}),i("col",{staticStyle:{width:"100px"}}),i("col",{staticStyle:{width:"50px"}})]),e._v(" "),i("thead",[i("tr",[i("td",[e._v("轨迹时间")]),e._v(" "),i("td",[e._v("经度")]),e._v(" "),i("td",[e._v("纬度")]),e._v(" "),i("td",[e._v("车速")])])])])]),e._v(" "),i("div",{staticClass:"tra-table-body"},[i("table",{attrs:{bgcolor:"#545557",border:"1",cellpadding:"0",cellspacing:"0",bordercolor:"black"}},[i("colgroup",[i("col",{staticStyle:{width:"130px"}}),i("col",{staticStyle:{width:"100px"}}),i("col",{staticStyle:{width:"100px"}}),i("col",{staticStyle:{width:"50px"}})]),e._v(" "),i("tbody",e._l(e.trajectorylists,function(t,a){return i("tr",{key:a.id},[i("td",[e._v(e._s(t.trackTime))]),e._v(" "),i("td",[e._v(e._s(Math.round(1e6*t.longitude)/1e6))]),e._v(" "),i("td",[e._v(e._s(Math.round(1e6*t.latitude)/1e6))]),e._v(" "),i("td",[e._v(e._s(t.mobileyeChinaVelocity))])])}))])])]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var C=i("VU/8")(g,y,!1,function(e){i("tm1Y")},null,null).exports;a.default.use(r.a);var f=new r.a({routes:[{path:"/",name:"main",component:C}]}),p=i("zL8q"),b=i.n(p);i("tvR6");a.default.use(b.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:f,render:function(e){return e(n)}})},T4x7:function(e,t){},ahPi:function(e,t){},hte4:function(e,t){},tm1Y:function(e,t){},tvR6:function(e,t){}},["NHnr"]);